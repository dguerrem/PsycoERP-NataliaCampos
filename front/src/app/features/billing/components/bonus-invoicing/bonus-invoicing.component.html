<!-- Contenido Facturación de Bonos con Subtabs -->
<div data-slot="tabs-content" class="flex-1 outline-none mt-0 h-full">
  <div class="h-full flex flex-col">

    <!-- Subtabs -->
    <div class="border-b px-6 pt-4">
      <div data-slot="tabs-list"
        class="bg-muted/50 text-muted-foreground h-9 items-center justify-center rounded-lg p-[2px] inline-flex w-auto">
        <button type="button" (click)="onSubTabChange('generate')"
          [attr.data-state]="activeSubTab() === 'generate' ? 'active' : 'inactive'" data-slot="tabs-trigger"
          class="data-[state=active]:bg-background dark:data-[state=active]:text-foreground text-foreground dark:text-muted-foreground h-[calc(100%-1px)] flex-1 justify-center rounded-md border border-transparent px-4 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] data-[state=active]:shadow-sm flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
            <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"></path>
            <path d="M14 2v4a2 2 0 0 0 2 2h4"></path>
            <path d="M10 9H8"></path>
            <path d="M16 13H8"></path>
            <path d="M16 17H8"></path>
          </svg>
          Generar Facturas Pendientes
        </button>
        <button type="button" (click)="onSubTabChange('existing')"
          [attr.data-state]="activeSubTab() === 'existing' ? 'active' : 'inactive'" data-slot="tabs-trigger"
          class="data-[state=active]:bg-background dark:data-[state=active]:text-foreground text-foreground dark:text-muted-foreground h-[calc(100%-1px)] flex-1 justify-center rounded-md border border-transparent px-4 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] data-[state=active]:shadow-sm flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
            <path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path>
          </svg>
          Facturas Existentes
        </button>
      </div>
    </div>

    <!-- Contenido de Subtabs -->
    <div class="flex-1 overflow-auto">
      @if (activeSubTab() === 'generate') {
      <!-- Tab de Generar Facturas Pendientes -->
      <div class="p-6 h-full flex flex-col">
        <!-- Filtros y acciones superiores -->
        <div class="flex items-center gap-4 mb-6">
          <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
              <path d="M8 2v4"></path>
              <path d="M16 2v4"></path>
              <rect width="18" height="18" x="3" y="4" rx="2"></rect>
              <path d="M3 10h18"></path>
            </svg>
            <span class="font-medium">Bonos Pendientes de Facturar:</span>
          </div>

          <select [value]="bonusMonth" (change)="onMonthChange($event)" data-slot="select-trigger"
            class="border-input flex items-center justify-between gap-2 rounded-md border bg-background px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] h-9 w-40">
            @for (month of monthNames; track $index) {
            <option [value]="$index + 1" [selected]="$index + 1 === bonusMonth">{{ month }}</option>
            }
          </select>

          <select [value]="bonusYear" (change)="onYearChange($event)" data-slot="select-trigger"
            class="border-input flex items-center justify-between gap-2 rounded-md border bg-background px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] h-9 w-32">
            @for (year of years; track year) {
            <option [value]="year" [selected]="year === bonusYear">{{ year }}</option>
            }
          </select>
        </div>

        <!-- Card con inputs de numeración -->
        <div data-slot="card"
          class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm mb-6">
          <div data-slot="card-content" class="p-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
              <div>
                <label data-slot="label" class="flex items-center gap-2 text-sm leading-none font-medium select-none"
                  for="invoice-prefix">
                  Prefijo
                </label>
                <input data-slot="input" id="invoice-prefix" type="text" placeholder="FAC" [ngModel]="invoicePrefix"
                  (ngModelChange)="onPrefixChange($event)"
                  class="border-input h-9 w-full min-w-0 rounded-md border bg-white px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none md:text-sm focus-visible:ring-[3px]">
              </div>
              <div>
                <label data-slot="label" class="flex items-center gap-2 text-sm leading-none font-medium select-none"
                  for="invoice-year">
                  Año
                </label>
                <input data-slot="input" id="invoice-year" type="number" min="2000" max="2099" placeholder="2025"
                  [ngModel]="invoiceYear" (blur)="onInvoiceYearBlur()" (ngModelChange)="onInvoiceYearChange($event)"
                  class="border-input h-9 w-full min-w-0 rounded-md border bg-white px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none md:text-sm focus-visible:ring-[3px]">
              </div>
              <div>
                <label data-slot="label" class="flex items-center gap-2 text-sm leading-none font-medium select-none"
                  for="next-number">
                  Próximo Número
                </label>
                <div class="relative">
                  <input data-slot="input" id="next-number" type="number" min="1" [ngModel]="invoiceNextNumber"
                    readonly tabindex="-1"
                    class="border-input h-9 w-full min-w-0 rounded-md border bg-gray-50 px-3 py-1 text-base shadow-xs outline-none md:text-sm cursor-default text-gray-700">
                </div>
              </div>
              <div class="flex items-end">
                <div class="text-sm text-muted-foreground">
                  <p>Ejemplo: {{ invoicePrefix }}-{{ invoiceYear }}-{{ padNumber(invoiceNextNumber) }}</p>
                  <p>
                    Las siguientes facturas heredarán números correlativos
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tabla de bonos -->
        <div class="flex-1 min-h-0">
          <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">Bonos Vendidos - {{ getBonusMonthName() }} {{ bonusYear }}
            </h3>
            <p class="text-sm text-muted-foreground">Genera facturas individuales para cada bono vendido
            </p>
          </div>

          <div class="border rounded-lg overflow-hidden bg-background"
            style="height: calc(-650px + 100vh); min-height: 450px; max-height: 600px;">
            <div class="overflow-y-auto overflow-x-auto h-full">
              @if (isLoadingBonus) {
              <div class="flex items-center justify-center h-full">
                <div class="text-muted-foreground">Cargando bonos pendientes...</div>
              </div>
              } @else {
              <div data-slot="table-container" class="relative w-full overflow-x-auto">
                <table data-slot="table" class="w-full caption-bottom text-sm">
                  <thead data-slot="table-header" class="[&_tr]:border-b sticky top-0 bg-background z-10 shadow-sm">
                    <tr data-slot="table-row" class="hover:bg-muted/50 border-b transition-colors">
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[150px]">
                        Paciente</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[100px]">
                        DNI</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[180px]">
                        Email</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[120px]">
                        Clínica</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[80px]">
                        Sesiones</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[80px]">
                        Total</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[120px]">
                        Acciones</th>
                    </tr>
                    <tr data-slot="table-row" class="border-b bg-muted/30">
                      <th data-slot="table-head" class="h-10 px-2">
                        <input type="text" placeholder="Filtrar..." [value]="bonusPatientFilter()"
                          (input)="bonusPatientFilter.set($any($event.target).value)" data-slot="input"
                          class="border-input h-8 w-full min-w-0 rounded-md border bg-white px-2 py-1 text-xs shadow-xs outline-none focus-visible:ring-[2px]"
                          aria-label="Filtrar por nombre de paciente">
                      </th>
                      <th data-slot="table-head" class="h-10 px-2">
                        <input type="text" placeholder="Filtrar..." [value]="bonusDniFilter()"
                          (input)="bonusDniFilter.set($any($event.target).value)" data-slot="input"
                          class="border-input h-8 w-full min-w-0 rounded-md border bg-white px-2 py-1 text-xs shadow-xs outline-none focus-visible:ring-[2px]"
                          aria-label="Filtrar por DNI">
                      </th>
                      <th data-slot="table-head" class="h-10 px-2"></th>
                      <th data-slot="table-head" class="h-10 px-2">
                        <input type="text" placeholder="Filtrar..." [value]="bonusClinicFilter()"
                          (input)="bonusClinicFilter.set($any($event.target).value)" data-slot="input"
                          class="border-input h-8 w-full min-w-0 rounded-md border bg-white px-2 py-1 text-xs shadow-xs outline-none focus-visible:ring-[2px]"
                          aria-label="Filtrar por clínica">
                      </th>
                      <th data-slot="table-head" class="h-10 px-2"></th>
                      <th data-slot="table-head" class="h-10 px-2"></th>
                      <th data-slot="table-head" class="h-10 px-2"></th>
                    </tr>
                  </thead>
                  <tbody data-slot="table-body" class="[&_tr:last-child]:border-0">
                    @for (bonus of filteredBonusInvoices(); track bonus.bonus_id) {
                    <tr data-slot="table-row" class="hover:bg-muted/50 border-b transition-colors">
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap font-medium">{{
                        bonus.patient_full_name }}</td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap">{{ bonus.dni }}
                      </td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap">{{ bonus.email }}
                      </td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap">{{
                        bonus.clinic_name }}</td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap">
                        <span data-slot="badge"
                          class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap text-foreground">
                          {{ bonus.sessions_number }} {{ bonus.sessions_number === 1 ? 'sesión' : 'sesiones' }}
                        </span>
                      </td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap font-semibold">{{
                        formatCurrency(bonus.total_gross) }}</td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap">
                        <div class="flex gap-2">
                          <button data-slot="button" type="button" (click)="onPreviewInvoice(bonus.bonus_id)"
                            class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 rounded-md gap-1.5 px-3"
                            aria-label="Vista previa">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                              stroke-linejoin="round" class="h-4 w-4">
                              <path
                                d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0">
                              </path>
                              <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                          </button>
                          <button data-slot="button" type="button" (click)="onGenerateInvoice(bonus.bonus_id)"
                            class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-8 px-3 py-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                              stroke-linejoin="round" class="h-4 w-4">
                              <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"></path>
                              <path d="M14 2v4a2 2 0 0 0 2 2h4"></path>
                              <path d="M10 9H8"></path>
                              <path d="M16 13H8"></path>
                              <path d="M16 17H8"></path>
                            </svg>
                            Generar
                          </button>
                        </div>
                      </td>
                    </tr>
                    } @empty {
                    <tr>
                      <td colspan="7" class="text-center py-12 text-muted-foreground">
                        <div class="flex flex-col items-center gap-2">
                          <svg class="h-12 w-12 text-muted-foreground" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                          </svg>
                          <p class="font-medium">No hay bonos pendientes de facturar</p>
                        </div>
                      </td>
                    </tr>
                    }
                  </tbody>
                </table>
              </div>
              }
            </div>
          </div>
        </div>

      </div>
      <!-- Fin del Tab de Generar Facturas Pendientes -->
      }

      @if (activeSubTab() === 'existing') {
      <!-- Tab de Facturas Existentes -->
      <div class="p-6 h-full flex flex-col">
        <!-- Filtros superiores -->
        <div class="flex items-center gap-4 mb-6">
          <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
              <path d="M8 2v4"></path>
              <path d="M16 2v4"></path>
              <rect width="18" height="18" x="3" y="4" rx="2"></rect>
              <path d="M3 10h18"></path>
            </svg>
            <span class="font-medium">Facturas de Bonos Generadas:</span>
          </div>

          <select [value]="existingBonusMonth" (change)="onExistingMonthChange($event)" data-slot="select-trigger"
            class="border-input flex items-center justify-between gap-2 rounded-md border bg-background px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] h-9 w-40">
            @for (month of monthNames; track $index) {
            <option [value]="$index + 1" [selected]="$index + 1 === existingBonusMonth">{{ month }}</option>
            }
          </select>

          <select [value]="existingBonusYear" (change)="onExistingYearChange($event)" data-slot="select-trigger"
            class="border-input flex items-center justify-between gap-2 rounded-md border bg-background px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] h-9 w-32">
            @for (year of years; track year) {
            <option [value]="year" [selected]="year === existingBonusYear">{{ year }}</option>
            }
          </select>
        </div>

        <!-- Tabla de facturas existentes -->
        <div class="flex-1 min-h-0">
          <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">Facturas de Bonos - {{ getExistingBonusMonthName() }} {{
              existingBonusYear }}
            </h3>
            <p class="text-sm text-muted-foreground">Visualiza y descarga las facturas de bonos ya generadas
            </p>
          </div>

          <div class="border rounded-lg overflow-hidden bg-background"
            style="height: calc(-550px + 100vh); min-height: 450px; max-height: 600px;">
            <div class="overflow-y-auto overflow-x-auto h-full">
              @if (isLoadingExistingBonus) {
              <div class="flex items-center justify-center h-full">
                <div class="text-muted-foreground">Cargando facturas de bonos...</div>
              </div>
              } @else {
              <div data-slot="table-container" class="relative w-full overflow-x-auto">
                <table data-slot="table" class="w-full caption-bottom text-sm">
                  <thead data-slot="table-header" class="[&_tr]:border-b sticky top-0 bg-background z-10 shadow-sm">
                    <tr data-slot="table-row" class="hover:bg-muted/50 border-b transition-colors">
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[120px]">
                        Nº Factura</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[100px]">
                        Fecha</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[150px]">
                        Paciente</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[100px]">
                        DNI</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[80px]">
                        Sesiones</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[80px]">
                        Total</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[200px]">
                        Concepto</th>
                      <th data-slot="table-head"
                        class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap min-w-[120px]">
                        Acciones</th>
                    </tr>
                    <tr data-slot="table-row" class="border-b bg-muted/30">
                      <th data-slot="table-head" class="h-10 px-2">
                        <input type="text" placeholder="Filtrar..." [value]="existingInvoiceNumberFilter()"
                          (input)="existingInvoiceNumberFilter.set($any($event.target).value)" data-slot="input"
                          class="border-input h-8 w-full min-w-0 rounded-md border bg-white px-2 py-1 text-xs shadow-xs outline-none focus-visible:ring-[2px]"
                          aria-label="Filtrar por número de factura">
                      </th>
                      <th data-slot="table-head" class="h-10 px-2"></th>
                      <th data-slot="table-head" class="h-10 px-2">
                        <input type="text" placeholder="Filtrar..." [value]="existingPatientFilter()"
                          (input)="existingPatientFilter.set($any($event.target).value)" data-slot="input"
                          class="border-input h-8 w-full min-w-0 rounded-md border bg-white px-2 py-1 text-xs shadow-xs outline-none focus-visible:ring-[2px]"
                          aria-label="Filtrar por nombre de paciente">
                      </th>
                      <th data-slot="table-head" class="h-10 px-2">
                        <input type="text" placeholder="Filtrar..." [value]="existingDniFilter()"
                          (input)="existingDniFilter.set($any($event.target).value)" data-slot="input"
                          class="border-input h-8 w-full min-w-0 rounded-md border bg-white px-2 py-1 text-xs shadow-xs outline-none focus-visible:ring-[2px]"
                          aria-label="Filtrar por DNI">
                      </th>
                      <th data-slot="table-head" class="h-10 px-2"></th>
                      <th data-slot="table-head" class="h-10 px-2"></th>
                      <th data-slot="table-head" class="h-10 px-2"></th>
                      <th data-slot="table-head" class="h-10 px-2"></th>
                    </tr>
                  </thead>
                  <tbody data-slot="table-body" class="[&_tr:last-child]:border-0">
                    @for (invoice of filteredExistingBonusInvoices(); track invoice.id) {
                    <tr data-slot="table-row" class="hover:bg-muted/50 border-b transition-colors">
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap font-medium">{{
                        invoice.invoice_number }}</td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap">{{
                        invoice.invoice_date }}</td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap">{{
                        invoice.patient_full_name }}</td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap">{{ invoice.dni }}
                      </td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap">
                        <span data-slot="badge"
                          class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap text-foreground">
                          {{ invoice.sessions_number }} {{ invoice.sessions_number === 1 ? 'sesión' : 'sesiones' }}
                        </span>
                      </td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap font-semibold">{{
                        formatCurrency(invoice.total) }}</td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap">{{
                        invoice.concept }}</td>
                      <td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap">
                        <div class="flex gap-2">
                          <button data-slot="button" type="button" (click)="onPreviewExistingInvoice(invoice.id)"
                            class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 rounded-md gap-1.5 px-3"
                            aria-label="Vista previa">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                              stroke-linejoin="round" class="h-4 w-4">
                              <path
                                d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0">
                              </path>
                              <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                          </button>
                          <button data-slot="button" type="button" (click)="onDownloadInvoice(invoice.id)"
                            class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 rounded-md gap-1.5 px-3"
                            aria-label="Descargar">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                              stroke-linejoin="round" class="h-4 w-4">
                              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                              <polyline points="7 10 12 15 17 10"></polyline>
                              <line x1="12" x2="12" y1="15" y2="3"></line>
                            </svg>
                          </button>
                        </div>
                      </td>
                    </tr>
                    } @empty {
                    <tr>
                      <td colspan="8" class="text-center py-12 text-muted-foreground">
                        <div class="flex flex-col items-center gap-2">
                          <svg class="h-12 w-12 text-muted-foreground" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                          </svg>
                          <p class="font-medium">No hay facturas de bonos generadas para este período</p>
                        </div>
                      </td>
                    </tr>
                    }
                  </tbody>
                </table>
              </div>
              }
            </div>
          </div>
        </div>

      </div>
      <!-- Fin del Tab de Facturas Existentes -->
      }
    </div>
    <!-- Fin del Contenido de Subtabs -->

  </div>
</div>
