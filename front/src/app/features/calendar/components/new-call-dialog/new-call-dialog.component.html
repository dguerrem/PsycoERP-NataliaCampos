<app-reusable-modal
  [isOpen]="true"
  [title]="isEditMode ? 'Editar llamada' : 'Nueva llamada'"
  [subtitle]="isEditMode ? 'Actualiza la información de la llamada' : 'Registra una nueva llamada de un paciente'"
  [submitText]="isEditMode ? 'Actualizar' : 'Guardar'"
  [isFormValid]="isFormValid()"
  [actionType]="isEditMode ? 'edit' : 'create'"
  [modalType]="'call'"
  (onSubmit)="onSubmit()"
  (onCancel)="onClose()">

  <div class="p-4 sm:p-6 space-y-6">
    <!-- Información del paciente -->
    <div class="space-y-4">
      <div class="flex items-center gap-3 pb-3 border-b border-gray-100">
        <div class="p-1.5 bg-blue-100 rounded-md">
          <svg class="h-4 w-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
        </div>
        <h3 class="text-lg font-semibold text-gray-900">Información del paciente</h3>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
          <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">
            Nombre <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="firstName"
            [value]="formData().patientFirstName"
            (input)="updateFormField('patientFirstName', $any($event.target).value)"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent"
            placeholder="Ej: Juan"
            required>
        </div>

        <div>
          <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">
            Apellidos <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="lastName"
            [value]="formData().patientLastName"
            (input)="updateFormField('patientLastName', $any($event.target).value)"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent"
            placeholder="Ej: Pérez García"
            required>
        </div>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
          <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">
            Teléfono <span class="text-red-500">*</span>
          </label>
          <input
            type="tel"
            id="phone"
            [value]="formData().patientPhone"
            (input)="updateFormField('patientPhone', $any($event.target).value)"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent"
            placeholder="Ej: +34 612 345 678"
            required>
        </div>

        <div>
          <label for="dni" class="block text-sm font-medium text-gray-700 mb-1">
            DNI
          </label>
          <input
            type="text"
            id="dni"
            [value]="formData().patientDni"
            (input)="updateFormField('patientDni', $any($event.target).value)"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent"
            placeholder="Ej: 12345678A">
        </div>
      </div>
    </div>

    <!-- Información de la cita -->
    <div class="space-y-4">
      <div class="flex items-center gap-3 pb-3 border-b border-gray-100">
        <div class="p-1.5 bg-green-100 rounded-md">
          <svg class="h-4 w-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
        </div>
        <h3 class="text-lg font-semibold text-gray-900">Información de la cita</h3>
      </div>

      <div>
        <label for="sessionDate" class="block text-sm font-medium text-gray-700 mb-1">
          Fecha de la sesión <span class="text-red-500">*</span>
        </label>
        <input
          type="date"
          id="sessionDate"
          [value]="formData().sessionDate"
          (input)="updateFormField('sessionDate', $any($event.target).value)"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent"
          required>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
          <label for="startTime" class="block text-sm font-medium text-gray-700 mb-1">
            Hora inicio <span class="text-red-500">*</span>
          </label>
          <input
            type="time"
            id="startTime"
            [value]="formData().startTime"
            (input)="updateFormField('startTime', $any($event.target).value)"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent"
            required>
        </div>

        <div>
          <label for="endTime" class="block text-sm font-medium text-gray-700 mb-1">
            Hora fin <span class="text-red-500">*</span>
          </label>
          <input
            type="time"
            id="endTime"
            [value]="formData().endTime"
            (input)="updateFormField('endTime', $any($event.target).value)"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent"
            required>
        </div>
      </div>
    </div>

    <!-- Notas adicionales -->
    <div class="space-y-4">
      <div class="flex items-center gap-3 pb-3 border-b border-gray-100">
        <div class="p-1.5 bg-orange-100 rounded-md">
          <svg class="h-4 w-4 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
        </div>
        <h3 class="text-lg font-semibold text-gray-900">Notas adicionales</h3>
      </div>

      <div>
        <label for="notes" class="block text-sm font-medium text-gray-700 mb-1">
          Observaciones
        </label>
        <textarea
          id="notes"
          [value]="formData().notes"
          (input)="updateFormField('notes', $any($event.target).value)"
          rows="4"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent resize-none"
          placeholder="Escribe aquí cualquier observación relevante sobre la llamada..."></textarea>
      </div>
    </div>
  </div>
</app-reusable-modal>
